<div class="d-flex justify-content-between mb-3">
    <h1 class="page-heading">{{title}}</h1>
    <div class="text-right">
        <botao-voltar class="mr-2"></botao-voltar>
        <botao-novo routerLink="/incluir-solicitacao-registro"></botao-novo>
    </div>
</div>

<!-- filtro -->
<form class="row" [formGroup]="registrosFiltro">
    <div class="col-12 mb-3">
        <div class="card">
            <div class="card-body">
                <div class="text-left">
                    <small><strong>Filtros:</strong></small>
                </div>
                <div class="form-row">
                    <div class="col-12 col-sm-4 col-md-2 mb-2">
                        <label for="cnpjOriginador">CNPJ Originador:</label>
                        <input type="text" class="form-control form-control-sm" mask="00.000.000/0000-00" name="cnpjOriginador" id="cnpjOriginador" formControlName="cnpjOriginador">
                    </div>
                    <!-- <div class="col-12 col-sm-4 col-md-2 mb-2">
                        <label for="cnpjCredor">CNPJ Credor:</label>
                        <input type="text" class="form-control form-control-sm" mask="00.000.000/0000-00" name="cnpjCredor" id="cnpjCredor" formControlName="cnpjCredor">
                    </div> -->
                    <div class="col-12 col-sm-4 col-md-2 mb-2">
                        <label for="dataIni">Data Inicial:</label>
                        <input type="date" class="form-control form-control-sm" name="dataIni" id="dataIni" formControlName="dataIni">
                    </div>
                    <div class="col-12 col-sm-4 col-md-2 mb-2">
                        <label for="dataFim">Data Final:</label>
                        <input type="date" class="form-control form-control-sm" name="dataFim" id="dataFim" formControlName="dataFim">
                    </div>
                    <div class="col-12 col-sm-4 col-md-2 mb-2">
                        <label for="carteira">Carteira:</label>
                        <select class="form-control form-control-sm" name="carteira" id="carteira" formControlName="carteira" required>
                            <ng-container *ngFor="let item of carteiras">
                                <option value="{{item}}">{{item}}</option>
                            </ng-container>
                        </select>
                    </div>
                    <div class="col-12 col-sm-4 col-md-2 mb-2">
                        <label for="contrato">Contrato:</label>
                        <input type="text" class="form-control form-control-sm" name="contrato" id="contrato" formControlName="contrato">
                    </div>
                    <div class="col-12 col-sm-4 col-md-2 mb-2">
                        <label for="tipoAtivo">Tipo Ativo:</label>
                        <select class="form-control form-control-sm" name="tipoAtivo" id="tipoAtivo">
                            <option value=""></option>
                        </select>
                    </div>

                    <div class="col-12 text-right">
                        <button type="button" class="btn btn-sm btn-light mr-2" type="submit" (click)="limparClick()">
                            Limpar Filtros
                        </button>
                        <button type="button" class="btn btn-sm btn-info" (click)="filtrarClick()">
                            Aplicar Filtros
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</form>

<!-- Tabela -->
<div class="table-responsive card">
    <small *ngIf="registroVazio" class="p-3">Nenhum resultado encontrado</small>
    <table *ngIf="!registroVazio" class="table table-striped table-bordered table-hover">
        <thead>
            <tr class=""> 
                <th class="" *ngFor="let head of headElements" scope="col"><b>{{ head }}</b></th>
            </tr>
        </thead>
        <tbody class="">
            <tr *ngFor="let registro of registros" routerLink="/registros/detalhes/{{registro.id_registro}}/{{registro.protocolo}}">
                <td class="text-nowrap">{{registro.originador_cnpj | mask:"00.000.000/0000-00"}}</td>
                <td class="text-nowrap">{{registro.ativo}}</td>
                <!-- <td class="text-nowrap">{{registro.credor_cnpj | mask:"00.000.000/0000-00"}}</td>-->
                <td class="text-nowrap">{{registro.carteira}}</td>
                <!--
                <td  *ngIf="registro.devedor_tipo_documento == 'CPF'" class="text-nowrap">{{registro.devedor_numero_documento | mask:'999.999.999-99'}}</td>
                <td  *ngIf="registro.devedor_tipo_documento == 'CNPJ'"class="text-nowrap">{{registro.devedor_numero_documento | mask:'99.999.999/9999-99'}}</td>
                -->
                <td class="text-nowrap">{{registro.data_inclusao | date:'dd/MM/yyyy HH:mm:ss'}}</td>
                <!--<td class="text-nowrap">{{registro.devedor_email}}</td>
				<td class="text-nowrap">{{registro.avalista_numero_documento}}</td>-->
                <td class="text-nowrap">{{registro.codigo_contrato_operacao_credito}}</td>
                <td class="text-nowrap">{{registro.valor_total_credito  | formatCurrency}}</td>
                <td class="text-nowrap">{{registro.data_contrato | date:'dd/MM/yyyy'}}</td>
                <td class="text-nowrap">{{registro.valor_liquido_credito  | formatCurrency}}</td>
                <td>
                    <p class="badge consistent mr-1">{{registro.indicador_consistente}}</p>
                    <p class="badge neutral mr-1">{{registro.indicador_neutro}}</p>
                    <p class="badge warning mr-1">{{registro.indicador_alerta}}</p>
                    <p class="badge critical">{{registro.indicador_critico}}</p>
                </td>
                <td class="text-nowrap">{{registro.status}}</td>
            </tr>
        </tbody>
    </table>
</div>
<div *ngIf="!registroVazio" class="row">
    <nav class="p-3">
        <ul class="pagination mb-1">
            <pagination [boundaryLinks]="true" [totalItems]="totalRegistros" [(ngModel)]="page" [itemsPerPage]="20" [maxSize]="10" previousText="&lsaquo;" nextText="&rsaquo;" firstText="&laquo;" lastText="&raquo;" (pageChanged)="pageChanged($event)"></pagination>
        </ul>
    </nav>
</div>