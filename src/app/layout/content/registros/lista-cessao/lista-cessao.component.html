<div class="d-flex justify-content-between mb-3">
    <h1 class="page-heading">{{title}}</h1>
    <div class="text-right">
        <botao-voltar class="mr-2"></botao-voltar>
        <!-- RND_SPRINT_1_0040: Eliminacao do menu de inclusao por ser possivel incluir a partir da tela de consulta de cessoes. -->
        <botao-novo routerLink="/disponibilizar-registros"></botao-novo>
    </div>
</div>

<!-- filtro de cessoes por cnpj-detentor -->
<form class="row" [formGroup]="registrosFiltro">
    <div class="col-12 mb-3">
        <div class="card">
            <div class="card-body">
                <div class="text-left">
                    <small><strong>Filtros:</strong></small>
                </div>
                <div class="form-row">
                    <!-- <div class="col-12 col-sm-4 col-md-2 mb-2">
                        <label for="cnpjOriginador">CNPJ Cedente:</label>
                        <input type="text" class="form-control form-control-sm" mask="00.000.000/0000-00" name="cnpjOriginador" id="cnpjOriginador" formControlName="cnpjOriginador">
                    </div> -->
                    <div class="col-12 col-sm-4 col-md-2 mb-2">
                        <label for="cnpjCessionaria">CNPJ Cessionário:</label>
                        <input type="text" class="form-control form-control-sm" mask="00.000.000/0000-00" name="cnpjCessionaria" id="cnpjCessionaria" formControlName="cnpjCessionaria">
                    </div>
                    <div class="col-12 col-sm-4 col-md-2 mb-2">
                        <label for="dataIni">Data da Inicial:</label>
                        <input type="date" class="form-control form-control-sm" name="dataIni" id="dataIni" formControlName="dataIni">
                    </div>
                    <div class="col-12 col-sm-4 col-md-2 mb-2">
                        <label for="dataFim">Data Final:</label>
                        <input type="date" class="form-control form-control-sm" name="dataFim" id="dataFim" formControlName="dataFim">
                    </div>
                    <div class="col-12 col-sm-4 col-md-3 mb-2">
                        <label for="codigoTermoCessao">Termo de Cessão:</label>
                        <input class="form-control form-control-sm" name="codigoTermoCessao" id="codigoTermoCessao" formControlName="codigoTermoCessao">
                    </div>
                    <div class="col-12 col-sm-4 col-md-3 mb-2">
                        <label for="status">Status:</label> <select class="form-control form-control-sm"
                            name="status" id="status" formControlName="status">
                            <option value="1">Ofertada</option>
                            <option value="2">Aguardando Liberação</option>
                            <option value="3">Concluída</option>
                            <option value="4">Suspensa</option>
                            <option value="5">Cancelada</option>
                        </select>
                    </div>

                    <div class="col-12 text-right">
                        <button type="button" class="btn btn-sm btn-light mr-2" type="submit" (click)="limparClick()">
                            Limpar Filtros
                        </button>
                        <button type="button" class="btn btn-sm btn-info" (click)="filtrarClick()">
                            Aplicar Filtros
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</form>

<h5>Cedente</h5>

<!-- Tabela de cessoes por cnpj-detentor -->
<div class="table-responsive card">
    <small *ngIf="registroVazio" class="p-3">Nenhum resultado encontrado</small>
    <table *ngIf="!registroVazio" class="table table-striped table-bordered table-hover">
        <thead>
            <tr class="">
                <th class="" *ngFor="let head of headElements" scope="col"><b>{{ head }}</b></th>
            </tr>
        </thead>
        <tbody class="">
            <tr *ngFor="let registro of registros" routerLink="/detalhes-cessao/{{registro.codigo_termo_cessao}}/{{registro.codigo_contrato_operacao_credito}}/{{registro.id}}">
                <td class="text-nowrap">{{registro.originador_cnpj | mask:"00.000.000/0000-00"}}</td>
                <td class="text-nowrap">{{registro.cnpj_cessionaria | mask:"00.000.000/0000-00"}}</td>
                <td class="text-nowrap">{{registro.data_cessao  | date:'dd/MM/yyyy HH:mm:ss'}}</td>
                <td class="text-nowrap">{{registro.data_disponibilizacao | date:'dd/MM/yyyy HH:mm:ss'}}</td>
                <td class="text-nowrap">{{registro.codigo_termo_cessao}}</td>
                <!-- <td class="text-nowrap">{{registro.codigo_contrato_operacao_credito}}</td> -->
                <td class="text-nowrap">{{registro.status | statusCessao }}
                    <!-- <span *ngIf="registro.aceito == true">Aceito</span>
                    <span *ngIf="registro.aceito == false">Recusada</span>
                    <span *ngIf="registro.aceito == null">Pendente</span> -->
                </td>
            </tr>
        </tbody>
    </table>
</div>
<div  class="row">
    <nav class="p-3">
        <pagination [boundaryLinks]="true" [totalItems]="totalRegistros" [(ngModel)]="page" [itemsPerPage]="10" [maxSize]="10" previousText="&lsaquo;" nextText="&rsaquo;" firstText="&laquo;" lastText="&raquo;" (pageChanged)="pageChanged($event)"></pagination>
    </nav>
</div>


<!-- filtro de cessoes por cnpj-cessionario -->
<form class="row" [formGroup]="registrosCessionarioFiltro">
    <div class="col-12 mb-3">
        <div class="card">
            <div class="card-body">
                <div class="text-left">
                    <small><strong>Filtros:</strong></small>
                </div>
                <div class="form-row">
                    <!-- <div class="col-12 col-sm-4 col-md-2 mb-2">
                        <label for="cnpjOriginador">CNPJ Cedente:</label>
                        <input type="text" class="form-control form-control-sm" mask="00.000.000/0000-00" name="cnpjOriginador" id="cnpjOriginador" formControlName="cnpjOriginador">
                    </div> -->
                    <div class="col-12 col-sm-4 col-md-2 mb-2">
                        <label for="cnpjCessionaria">CNPJ Cedente:</label>
                        <input type="text" class="form-control form-control-sm" mask="00.000.000/0000-00" name="cnpjDetentor" id="cnpjDetentor" formControlName="cnpjDetentor">
                    </div>
                    <div class="col-12 col-sm-4 col-md-2 mb-2">
                        <label for="dataIni">Data da Inicial:</label>
                        <input type="date" class="form-control form-control-sm" name="dataIni" id="dataIni" formControlName="dataIni">
                    </div>
                    <div class="col-12 col-sm-4 col-md-2 mb-2">
                        <label for="dataFim">Data Final:</label>
                        <input type="date" class="form-control form-control-sm" name="dataFim" id="dataFim" formControlName="dataFim">
                    </div>
                    <div class="col-12 col-sm-4 col-md-3 mb-2">
                        <label for="codigoTermoCessao">Termo de Cessão:</label>
                        <input class="form-control form-control-sm" name="codigoTermoCessao" id="codigoTermoCessao" formControlName="codigoTermoCessao">
                    </div>
                    <div class="col-12 col-sm-4 col-md-3 mb-2">
                        <label for="status">Status:</label> <select class="form-control form-control-sm"
                            name="status" id="status" formControlName="status">
                            <option value="1">Ofertada</option>
                            <option value="2">Aguardando Liberação</option>
                            <option value="3">Concluída</option>
                            <option value="4">Suspensa</option>
                            <option value="5">Cancelada</option>
                        </select>
                    </div>

                    <div class="col-12 text-right">
                        <button type="button" class="btn btn-sm btn-light mr-2" type="submit" (click)="limparCessionarioClick()">
                            Limpar Filtros
                        </button>
                        <button type="button" class="btn btn-sm btn-info" (click)="filtrarCessionarioClick()">
                            Aplicar Filtros
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</form>

<h5>Cessionário</h5>

<!-- Tabela de cessoes por cnpj-cessionario-->
<div class="table-responsive card">
    <small *ngIf="registroCessionarioVazio" class="p-3">Nenhum resultado encontrado</small>
    <table *ngIf="!registroCessionarioVazio" class="table table-striped table-bordered table-hover">
        <thead>
            <tr class="">
                <th class="" *ngFor="let headCessionario of headElementsCessionario" scope="col"><b>{{ headCessionario }}</b></th>
            </tr>
        </thead>
        <tbody class="">
            <tr *ngFor="let registroCessionario of registrosCessionario" routerLink="/detalhes-cessao/{{registroCessionario.codigo_termo_cessao}}/{{registroCessionario.codigo_contrato_operacao_credito}}/{{registroCessionario.id}}">
                <td class="text-nowrap">{{registroCessionario.originador_cnpj | mask:"00.000.000/0000-00"}}</td>
                <td class="text-nowrap">{{registroCessionario.cnpj_cessionaria | mask:"00.000.000/0000-00"}}</td>
                <td class="text-nowrap">{{registroCessionario.data_cessao  | date:'dd/MM/yyyy HH:mm:ss'}}</td>
                <td class="text-nowrap">{{registroCessionario.data_disponibilizacao | date:'dd/MM/yyyy HH:mm:ss'}}</td>
                <td class="text-nowrap">{{registroCessionario.codigo_termo_cessao}}</td>
                <!-- <td class="text-nowrap">{{registro.codigo_contrato_operacao_credito}}</td> -->
                <td class="text-nowrap">{{registroCessionario.status | statusCessao }}
                    <!-- <span *ngIf="registro.aceito == true">Aceito</span>
                    <span *ngIf="registro.aceito == false">Recusada</span>
                    <span *ngIf="registro.aceito == null">Pendente</span> -->
                </td>
            </tr>
        </tbody>
    </table>
</div>
<div  class="row">
    <nav class="p-3">
        <pagination [boundaryLinks]="true" [totalItems]="totalRegistrosCessionario" [(ngModel)]="pageCessionario" [itemsPerPage]="10" [maxSize]="10" previousText="&lsaquo;" nextText="&rsaquo;" firstText="&laquo;" lastText="&raquo;" (pageChanged)="pageChangedCessionario($event)"></pagination>
    </nav>
</div>